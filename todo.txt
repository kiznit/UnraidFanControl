Branding - remove "Unraid" from title (?) and add some flavour (kzinti? kz? Thierry?)


Hard Drive Temp
    - https://wiki.archlinux.org/title/lm_sensors
    - See section 5.3 - S.M.A.R.T. drive temperature

    Since kernel 5.6 the drivetemp module will report SATA/SAS temperature through hwmon, but sensors-detect does not automatically detect this so the module must be manually loaded.

    # modprobe drivetemp


Calling "sensors" will spin-up drives (or prevent them from sleeping), which is not what we want. Here is a script that checks disks.ini for temp info:
https://forums.unraid.net/topic/114503-custom-pwm-fan-control-script-based-on-disk-temps-using-disksini-to-avoid-drive-spinup/


To find fans and pwm, autofan uses:

function list_fan() {
  $out = [];
  exec("find /sys/devices -type f -iname 'fan[0-9]_input' -exec dirname \"{}\" +|uniq", $chips);
  foreach ($chips as $chip) {
    $name = is_file("$chip/name") ? file_get_contents("$chip/name") : false;
    if ($name) foreach (preg_grep("/fan\d+_input/", scan_dir($chip)) as $fan) $out[] = ['chip'=>$name, 'name'=>end(explode('/',$fan)), 'sensor'=>$fan , 'rpm'=>file_get_contents($fan)];
  }
  return $out;
}

function list_pwm() {
  $out = [];
  exec("find /sys/devices -type f -iname 'pwm[0-9]' -exec dirname \"{}\" +|uniq", $chips);
  foreach ($chips as $chip) {
    $name = is_file("$chip/name") ? file_get_contents("$chip/name") : '';
    foreach (preg_grep("/pwm\d+$/", scan_dir($chip)) as $pwm) $out[] = ['chip'=>$name, 'name'=>end(explode('/',$pwm)), 'sensor'=>$pwm];
  }
  return $out;
}

Simplified:
    find /sys/devices -type f -iname 'fan[0-9]_input'   // File contains fan RPM
    find /sys/devices -type f -iname 'pwm[0-9]'         // File contains fan speed (0-255, not RPM!)

    echo 1 >> pwm0_enable to enable (can be read too)
    echo 0 >> pwm0_enable to disable
    echo $speed >> pwm0 to set speed

    For other pwm_* files, check:
        https://mjmwired.net/kernel/Documentation/hwmon/amc6821

    TODO: it looks like the ramp can be programmed using the other pwm_* files (3 points)

TODO:
    pwm files are also listed at  /sys/class/hwmon/... why in two locations?
        --> https://www.kernel.org/doc/Documentation/hwmon/sysfs-interface



systemp thingy does this for sensors:
 $sensors = explode(' ',exec("sensors -A|awk 'BEGIN{cpu=\"\";mb=\"\";fan=\"\"}{if (/^CPU Temp/) cpu=\$3*1; if (/^MB Temp/) mb=\$3*1; if (/^Array Fan/) fan=fan\" \"\$3*1} END{print cpu,mb fan}'"));


pwmconfig can show hwmon# to device mapping somehow... but it asks questions
